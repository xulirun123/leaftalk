<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .status {
            display: inline-block;
            padding: 8px 16px;
            background: #ff6b6b;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .test-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border-left: 4px solid #ff6b6b;
        }
        
        .test-section h3 {
            color: #333;
            margin-bottom: 16px;
            font-size: 18px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .test-button {
            padding: 12px 20px;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: block;
        }
        
        .test-button:hover {
            background: #45b7aa;
            transform: translateY(-2px);
        }
        
        .test-button.primary {
            background: #ff6b6b;
        }
        
        .test-button.primary:hover {
            background: #ff5252;
        }
        
        .debug-info {
            background: #f1f3f4;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 12px;
            color: #333;
            white-space: pre-wrap;
            margin: 16px 0;
            border: 1px solid #e0e0e0;
        }
        
        .problem-list {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .problem-list h4 {
            color: #856404;
            margin-bottom: 12px;
        }
        
        .problem-list ul {
            margin-left: 20px;
            color: #856404;
        }
        
        .problem-list li {
            margin-bottom: 8px;
        }
        
        .solution-list {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .solution-list h4 {
            color: #155724;
            margin-bottom: 12px;
        }
        
        .solution-list ul {
            margin-left: 20px;
            color: #155724;
        }
        
        .solution-list li {
            margin-bottom: 8px;
        }
        
        .current-lang {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ”§ è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•</h1>
            <p class="subtitle">è¯Šæ–­å’Œä¿®å¤è¯­è¨€åˆ‡æ¢é—®é¢˜</p>
            <div class="status">ğŸš¨ éœ€è¦ä¿®å¤</div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ¯ é—®é¢˜æè¿°</h3>
            <div class="problem-list">
                <h4>âš ï¸ å½“å‰é—®é¢˜</h4>
                <ul>
                    <li><strong>profile.services</strong> ç­‰ç¿»è¯‘é”®åˆ‡æ¢è¯­ç§æ—¶ä¸ç”Ÿæ•ˆ</li>
                    <li>é€‰æ‹©ä¸åŒè¯­è¨€åï¼Œéƒ¨åˆ†ç•Œé¢å…ƒç´ æ²¡æœ‰ç»Ÿä¸€åˆ‡æ¢</li>
                    <li>è¯­è¨€åˆ‡æ¢åéœ€è¦åˆ·æ–°é¡µé¢æ‰èƒ½çœ‹åˆ°å®Œæ•´æ•ˆæœ</li>
                    <li>i18n çš„ locale è®¾ç½®å¯èƒ½æ²¡æœ‰æ­£ç¡®ä¼ æ’­åˆ°æ‰€æœ‰ç»„ä»¶</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ” è¯Šæ–­æ­¥éª¤</h3>
            <div class="test-grid">
                <button class="test-button" onclick="checkI18nStatus()">
                    æ£€æŸ¥ i18n çŠ¶æ€
                </button>
                <button class="test-button" onclick="testTranslations()">
                    æµ‹è¯•ç¿»è¯‘é”®
                </button>
                <button class="test-button" onclick="checkLocalStorage()">
                    æ£€æŸ¥æœ¬åœ°å­˜å‚¨
                </button>
                <button class="test-button" onclick="simulateLanguageSwitch()">
                    æ¨¡æ‹Ÿè¯­è¨€åˆ‡æ¢
                </button>
            </div>
            <div id="diagnostic-output" class="debug-info">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹è¯Šæ–­...</div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ</h3>
            <div class="solution-list">
                <h4>âœ… ä¿®å¤æ­¥éª¤</h4>
                <ul>
                    <li><strong>ç¡®ä¿ i18n å®ä¾‹æ­£ç¡®é…ç½®</strong>ï¼šæ£€æŸ¥æ‰€æœ‰è¯­è¨€åŒ…æ˜¯å¦æ­£ç¡®åŠ è½½</li>
                    <li><strong>ç»Ÿä¸€è¯­è¨€åˆ‡æ¢é€»è¾‘</strong>ï¼šç¡®ä¿æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç›¸åŒçš„ locale çŠ¶æ€</li>
                    <li><strong>å¼ºåˆ¶é‡æ–°æ¸²æŸ“</strong>ï¼šè¯­è¨€åˆ‡æ¢åè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
                    <li><strong>æ£€æŸ¥ç¿»è¯‘é”®ç»“æ„</strong>ï¼šç¡®ä¿æ‰€æœ‰è¯­è¨€æ–‡ä»¶æœ‰ç›¸åŒçš„é”®ç»“æ„</li>
                    <li><strong>æ·»åŠ å“åº”å¼ç›‘å¬</strong>ï¼šç›‘å¬ locale å˜åŒ–å¹¶æ›´æ–°æ‰€æœ‰ç›¸å…³ç»„ä»¶</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ§ª å®é™…æµ‹è¯•</h3>
            <div class="test-grid">
                <a href="http://127.0.0.1:5173/settings/language-selector" class="test-button primary" target="_blank">
                    æ‰“å¼€è¯­è¨€é€‰æ‹©é¡µé¢
                </a>
                <a href="http://127.0.0.1:5173/profile" class="test-button" target="_blank">
                    æ‰“å¼€ä¸ªäººèµ„æ–™é¡µé¢
                </a>
                <a href="http://127.0.0.1:5173/settings/general" class="test-button" target="_blank">
                    æ‰“å¼€é€šç”¨è®¾ç½®é¡µé¢
                </a>
                <button class="test-button" onclick="openDevTools()">
                    æ‰“å¼€å¼€å‘è€…å·¥å…·
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“ æµ‹è¯•è¯´æ˜</h3>
            <p><strong>æµ‹è¯•æµç¨‹ï¼š</strong></p>
            <ol style="margin-left: 20px; margin-top: 12px;">
                <li>æ‰“å¼€è¯­è¨€é€‰æ‹©é¡µé¢</li>
                <li>é€‰æ‹©ä¸åŒçš„è¯­è¨€ï¼ˆå¦‚è‹±è¯­ã€æ—¥è¯­ï¼‰</li>
                <li>è§‚å¯Ÿé¡µé¢æ˜¯å¦ç«‹å³åˆ‡æ¢è¯­è¨€</li>
                <li>è¿”å›ä¸ªäººèµ„æ–™é¡µé¢ï¼Œæ£€æŸ¥ profile.services ç­‰æ˜¯å¦æ­£ç¡®ç¿»è¯‘</li>
                <li>å¦‚æœæ²¡æœ‰åˆ‡æ¢ï¼Œæ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯</li>
            </ol>
        </div>
    </div>

    <script>
        function checkI18nStatus() {
            const output = document.getElementById('diagnostic-output')
            let info = 'ğŸ” i18n çŠ¶æ€æ£€æŸ¥:\n\n'
            
            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨
            const savedLang = localStorage.getItem('yeyu_language')
            const userLocale = localStorage.getItem('user-locale')
            
            info += `ğŸ“¦ æœ¬åœ°å­˜å‚¨:\n`
            info += `  - yeyu_language: ${savedLang || 'æœªè®¾ç½®'}\n`
            info += `  - user-locale: ${userLocale || 'æœªè®¾ç½®'}\n\n`
            
            // æ£€æŸ¥ HTML lang å±æ€§
            const htmlLang = document.documentElement.lang
            info += `ğŸŒ HTML lang å±æ€§: ${htmlLang}\n\n`
            
            // æ£€æŸ¥æ˜¯å¦æœ‰å…¨å±€ i18n ç›¸å…³å¯¹è±¡
            info += `ğŸ”§ å…¨å±€å¯¹è±¡æ£€æŸ¥:\n`
            info += `  - window.$t: ${typeof window.$t}\n`
            info += `  - window.$setLanguage: ${typeof window.$setLanguage}\n\n`
            
            info += `â° æ£€æŸ¥æ—¶é—´: ${new Date().toLocaleString()}`
            
            output.textContent = info
            console.log('ğŸ” i18n çŠ¶æ€æ£€æŸ¥å®Œæˆ')
        }
        
        function testTranslations() {
            const output = document.getElementById('diagnostic-output')
            let info = 'ğŸ“ ç¿»è¯‘é”®æµ‹è¯•:\n\n'
            
            const testKeys = [
                'profile.services',
                'profile.favorites', 
                'profile.moments',
                'profile.videoChannel',
                'profile.stickers',
                'profile.settings',
                'settings.language',
                'languages.zhCN',
                'languages.en'
            ]
            
            info += `ğŸ§ª æµ‹è¯•ç¿»è¯‘é”®:\n`
            testKeys.forEach(key => {
                info += `  - ${key}: éœ€è¦åœ¨å®é™…åº”ç”¨ä¸­æµ‹è¯•\n`
            })
            
            info += `\nğŸ’¡ æç¤º: è¿™äº›é”®éœ€è¦åœ¨ Vue åº”ç”¨ä¸­ä½¿ç”¨ t('${testKeys[0]}') ç­‰å‡½æ•°æµ‹è¯•`
            
            output.textContent = info
            console.log('ğŸ“ ç¿»è¯‘é”®æµ‹è¯•å®Œæˆ')
        }
        
        function checkLocalStorage() {
            const output = document.getElementById('diagnostic-output')
            let info = 'ğŸ’¾ æœ¬åœ°å­˜å‚¨æ£€æŸ¥:\n\n'
            
            // è·å–æ‰€æœ‰ç›¸å…³çš„æœ¬åœ°å­˜å‚¨é¡¹
            const keys = ['yeyu_language', 'user-locale', 'i18n-locale']
            
            info += `ğŸ“‹ å­˜å‚¨é¡¹æ£€æŸ¥:\n`
            keys.forEach(key => {
                const value = localStorage.getItem(key)
                info += `  - ${key}: ${value || 'æœªè®¾ç½®'}\n`
            })
            
            info += `\nğŸ”„ å°è¯•è®¾ç½®æµ‹è¯•è¯­è¨€...\n`
            localStorage.setItem('yeyu_language', 'en')
            localStorage.setItem('user-locale', 'en')
            info += `âœ… å·²è®¾ç½®æµ‹è¯•è¯­è¨€ä¸ºè‹±è¯­\n`
            
            info += `\nâ° æ£€æŸ¥æ—¶é—´: ${new Date().toLocaleString()}`
            
            output.textContent = info
            console.log('ğŸ’¾ æœ¬åœ°å­˜å‚¨æ£€æŸ¥å®Œæˆ')
        }
        
        function simulateLanguageSwitch() {
            const output = document.getElementById('diagnostic-output')
            let info = 'ğŸ”„ æ¨¡æ‹Ÿè¯­è¨€åˆ‡æ¢:\n\n'
            
            const languages = ['zh-CN', 'en', 'ja', 'ko', 'ms', 'zh-TW']
            const currentLang = localStorage.getItem('yeyu_language') || 'zh-CN'
            const currentIndex = languages.indexOf(currentLang)
            const nextLang = languages[(currentIndex + 1) % languages.length]
            
            info += `ğŸ“ å½“å‰è¯­è¨€: ${currentLang}\n`
            info += `ğŸ¯ åˆ‡æ¢åˆ°: ${nextLang}\n\n`
            
            // è®¾ç½®æ–°è¯­è¨€
            localStorage.setItem('yeyu_language', nextLang)
            localStorage.setItem('user-locale', nextLang)
            document.documentElement.lang = nextLang
            
            info += `âœ… æœ¬åœ°å­˜å‚¨å·²æ›´æ–°\n`
            info += `âœ… HTML lang å±æ€§å·²æ›´æ–°\n\n`
            
            info += `âš ï¸ æ³¨æ„: å®é™…çš„ Vue åº”ç”¨éœ€è¦ç›‘å¬è¿™äº›å˜åŒ–å¹¶é‡æ–°æ¸²æŸ“\n`
            info += `ğŸ’¡ å»ºè®®: åˆ·æ–°é¡µé¢æˆ–é‡æ–°æ‰“å¼€è¯­è¨€é€‰æ‹©é¡µé¢æŸ¥çœ‹æ•ˆæœ\n\n`
            
            info += `â° åˆ‡æ¢æ—¶é—´: ${new Date().toLocaleString()}`
            
            output.textContent = info
            console.log(`ğŸ”„ æ¨¡æ‹Ÿè¯­è¨€åˆ‡æ¢: ${currentLang} -> ${nextLang}`)
        }
        
        function openDevTools() {
            alert('è¯·æŒ‰ F12 æˆ–å³é”®é€‰æ‹©"æ£€æŸ¥"æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¿¡æ¯')
            console.log('ğŸ› ï¸ å¼€å‘è€…å·¥å…·æç¤º')
            console.log('ğŸ“‹ æ£€æŸ¥ä»¥ä¸‹å†…å®¹:')
            console.log('1. æ§åˆ¶å°æ˜¯å¦æœ‰ i18n ç›¸å…³é”™è¯¯')
            console.log('2. Network æ ‡ç­¾é¡µæ˜¯å¦æ­£ç¡®åŠ è½½äº†è¯­è¨€æ–‡ä»¶')
            console.log('3. Application æ ‡ç­¾é¡µçš„ Local Storage ä¸­çš„è¯­è¨€è®¾ç½®')
            console.log('4. Vue DevTools ä¸­çš„ i18n çŠ¶æ€')
        }
        
        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½')
            console.log('ğŸ¯ ç›®æ ‡: ä¿®å¤ profile.services ç­‰ç¿»è¯‘é”®çš„è¯­è¨€åˆ‡æ¢é—®é¢˜')
            console.log('ğŸ“‹ æµ‹è¯•æ­¥éª¤:')
            console.log('1. ç‚¹å‡»è¯Šæ–­æŒ‰é’®æ£€æŸ¥å½“å‰çŠ¶æ€')
            console.log('2. æ‰“å¼€å®é™…åº”ç”¨é¡µé¢æµ‹è¯•è¯­è¨€åˆ‡æ¢')
            console.log('3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºå’Œé¡µé¢å˜åŒ–')
            console.log('4. æ ¹æ®ç»“æœè°ƒæ•´ i18n é…ç½®')
            
            // è‡ªåŠ¨æ£€æŸ¥å½“å‰çŠ¶æ€
            setTimeout(checkI18nStatus, 1000)
        })
    </script>
</body>
</html>
